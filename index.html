<!DOCTYPE html>
<html lang="en-US">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width" />

  <title>TODO Title</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <button onclick="main()">Start</button>
  <p id="device-orientation"></p>
  <p id="geolocation"></p>

  <script>
    function handleDeviceOrientation(event) {
      document.getElementById("device-orientation").innerText = ```
      absolute: ${event.absolute}<br>
      alpha: ${event.alpha}<br>
      beta: ${event.beta}<br>
      gamma: ${event.gamma}<br>
      webkitCompassHeading: ${event.webkitCompassHeading}<br>
      webkitCompassAccuracy: ${event.webkitCompassAccuracy}
      ```;
    }

    async function main() {
      if (DeviceOrientationEvent.requestPermission) {
        const deviceOrientationResponse = await DeviceOrientationEvent.requestPermission();
        if (deviceOrientationResponse !== "granted") {
          document.getElementById("device-orientation").innerText = `DeviceOrientation ${deviceOrientationResponse}`;
          return;
        }
      }
      if (Geolocation.requestPermission) {
        const geolocationResponse = await Geolocation.requestPermission();
        if (geolocationResponse !== "granted") {
          document.getElementById("geolocation").innerText = `Geolocation ${geolocationResponse}`;
          return;
        }
      }

      if (!navigator.geolocation) {
        document.getElementById("geolocation").innerText = `Geolocation ${navigator.geolocation}`;
        return;
      }
      const currentPosition = await navigator.geolocation.currentPosition();
      document.getElementById("geolocation").innerText = ```
        latitude: ${currentPosition.coords.latitude}<br>
        longitude: ${currentPosition.coords.longitude}<br>
        accuracy: ${currentPosition.coords.accuracy}<br>
      ```;
      window.addEventListener("deviceorientation", handleDeviceOrientation, true);
    }
  </script>
</body>

</html>